<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/images/favicon-32x32.png"
    />
    <title>
      Frontend Mentor | Newsletter sign-up form with success message
    </title>
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <form id="signupForm" action="#">
      <div class="formLeft">
        <div class="leftTop">
          <h1>Stay updated!</h1>
          <p>Join 60,000+ product managers receiving monthly updates on:</p>
          <ol>
            <li>Product discovery and building what matters</li>
            <li>Measuring to ensure updates are a success</li>
            <li>And much more!</li>
          </ol>
        </div>
        <div class="leftBottom">
          <div class="label">
            <label for="email">Email address: </label
            ><span id="emailError" style="color: red"></span>
          </div>
          <input type="email" placeholder="email@company.com" id="email" />
          <div id="emailError" style="color: red"></div>
          <button id="subscribeBtn">Subscribe to monthly newsletter</button>
        </div>
      </div>

      <div class="formRight"></div>
    </form>
    <div id="confirmationMessage">
      <div class="message">
        <img src="./assets/images/icon-success.svg" alt="icon" />
        <p>
          Thanks for subscribing! A confirmation email has been sent. Please
          open it and click the button inside to confirm your subscription.
        </p>
        <button id="dismissBtn">Dismiss message.</button>
      </div>
    </div>

    <div class="attribution">
      Challenge by
      <a href="https://www.frontendmentor.io?ref=challenge" target="_blank"
        >Frontend Mentor</a
      >. Coded by
      <a href="https://www.upwork.com/freelancers/~015da5e1bf8befb2c5"
        >M Ibrahim</a
      >
    </div>

    <script>
      let confirmationMessage = document.querySelector("#confirmationMessage");
      let subscribeBtn = document.getElementById("subscribeBtn");
      let dismissBtn = document.getElementById("dismissBtn");
      let emailInput = document.querySelector("#email");
      let emailError = document.getElementById("emailError");
      let form = document.querySelector("form");

      subscribeBtn.addEventListener("click", function (event) {
        event.preventDefault();
        validateAndSubscribe();
      });

      dismissBtn.addEventListener("click", function () {
        confirmationMessage.style.display = "none";
        form.style.display = "flex";
      });

      function validateAndSubscribe() {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        if (!emailRegex.test(emailInput.value)) {
          emailInput.classList.add("error");
          emailError.textContent = "Valid email required";
          return;
        }

        emailInput.classList.remove("error");
        emailError.textContent = "";

        let emailValue = emailInput.value;
        confirmationMessage.style.display = "flex";
        console.log("Email value: ", emailValue);
      }
    </script>
  </body>
</html>
